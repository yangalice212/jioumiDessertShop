(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30b9ba30"],{"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),s=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var s=n(e);s in t?a.f(t,s,o(0,c)):t[s]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),s=c("861d"),i=c("7b0b"),r=c("50c4"),u=c("8418"),l=c("65f0"),d=c("1dde"),b=c("b622"),g=c("2d00"),h=b("isConcatSpreadable"),p=9007199254740991,f="Maximum allowed index exceeded",O=g>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),j=d("concat"),m=function(t){if(!s(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},v=!O||!j;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,n,a,o,s=i(this),d=l(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],m(o)){if(a=r(o.length),b+a>p)throw TypeError(f);for(c=0;c<a;c++,b++)c in o&&u(d,b,o[c])}else{if(b>=p)throw TypeError(f);u(d,b++,o)}return d.length=b,d}})},b789:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a={class:"container my-3"},o=Object(n["g"])("h2",{class:"text-center mb-3"},"購物車",-1),s={key:0},i={class:"table-responsive"},r={class:"text-end mb-3"},u={class:"table align-middle mb-3"},l=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{width:"5%"}),Object(n["g"])("th",{width:"20%"}),Object(n["g"])("th",{width:"25%"},"產品名稱"),Object(n["g"])("th",{width:"10%",class:"text-center"},"數量"),Object(n["g"])("th",{width:"15%",class:"text-end"},"價格")])],-1),d={class:"text-center"},b=Object(n["g"])("span",{class:"material-icons"}," delete ",-1),g={class:"d-flex"},h=Object(n["g"])("span",{class:"material-icons"}," remove ",-1),p=Object(n["g"])("span",{class:"material-icons"}," add ",-1),f={class:"text-end"},O=Object(n["g"])("td",{colspan:"4",class:"text-end"},"總計",-1),j={class:"text-end"},m={colspan:"5",class:"text-end"},v={class:"input-group w-25 ms-auto"},C={key:0},x=Object(n["g"])("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),y={class:"text-end text-success"},w={class:"text-end"},k={key:1,class:"text-center"},$=Object(n["g"])("h3",null,"目前購物車是空的哦～",-1),B={class:"text-center"},L=Object(n["f"])(" 繼續購物 ");function T(t,e,c,T,q,A){var J=Object(n["x"])("Loading"),E=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])(n["a"],null,[Object(n["g"])(J,{isLoading:q.isLoading},null,8,["isLoading"]),Object(n["g"])("div",a,[o,0!==q.cart.length?(Object(n["s"])(),Object(n["d"])("div",s,[Object(n["g"])("div",i,[Object(n["g"])("div",r,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=function(){return A.delCart&&A.delCart.apply(A,arguments)})}," 刪除全部購物車 ")]),Object(n["g"])("table",u,[l,Object(n["g"])("tbody",null,[q.cart?(Object(n["s"])(!0),Object(n["d"])(n["a"],{key:0},Object(n["w"])(q.cart,(function(t,e){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id},[Object(n["g"])("td",d,[Object(n["g"])("a",{href:"#",onClick:Object(n["J"])((function(e){return A.delCartItem(t.id)}),["prevent"])},[b],8,["onClick"])]),Object(n["g"])("td",null,[Object(n["g"])("div",{style:[{height:"150px","background-size":"cover","background-position":"center"},{"background-image":"url(".concat(t.product.imageUrl,")")}]},null,4)]),Object(n["g"])("td",null,Object(n["A"])(t.product.title),1),Object(n["g"])("td",null,[Object(n["g"])("div",g,[Object(n["g"])("a",{href:"#",onClick:Object(n["J"])((function(t){return A.minusQty(e)}),["prevent"]),disabled:t.qty<=1},[h],8,["onClick","disabled"]),Object(n["I"])(Object(n["g"])("input",{class:"border-0 text-center h5 w-100",type:"number",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return A.updateCart(t)}},null,40,["onUpdate:modelValue","onChange"]),[[n["E"],t.qty,void 0,{number:!0}]]),Object(n["g"])("a",{href:"#",onClick:Object(n["J"])((function(t){return A.addQty(e)}),["prevent"])},[p],8,["onClick"])])]),Object(n["g"])("td",f,"NT$ "+Object(n["A"])(t.total),1)])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[O,Object(n["g"])("td",j,"NT$ "+Object(n["A"])(q.carts.total),1)]),Object(n["g"])("tr",null,[Object(n["g"])("td",m,[Object(n["g"])("div",v,[Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",placeholder:"輸入優惠卷代碼","onUpdate:modelValue":e[2]||(e[2]=function(t){return q.couponCode=t})},null,512),[[n["E"],q.couponCode]]),Object(n["g"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=function(t){return A.useCoupon(q.couponCode)})}," 套用優惠卷 ")])])]),q.carts.final_total!==q.carts.total?(Object(n["s"])(),Object(n["d"])("tr",C,[x,Object(n["g"])("td",y,"NT$ "+Object(n["A"])(t.$filter.thousands(q.carts.final_total)),1)])):Object(n["e"])("",!0)])]),Object(n["g"])("div",w,[Object(n["g"])("button",{onClick:e[4]||(e[4]=function(){return A.goPay&&A.goPay.apply(A,arguments)}),class:"btn btn-outline-primary"},"結帳去")])])])):(Object(n["s"])(),Object(n["d"])("div",k,[$])),Object(n["g"])("div",B,[Object(n["g"])(E,{to:"/products",class:"btn btn-warning"},{default:Object(n["H"])((function(){return[L]})),_:1})])])],64)}c("99af");var q=c("e689"),A={name:"Cart",data:function(){return{cart:[],carts:{},isLoading:!1,qty:1,couponCode:""}},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/cart");this.$http.get(e).then((function(e){e.data.success?(t.cart=e.data.data.carts,t.carts=e.data.data,t.isLoading=!1):alert(e.data.message)})).catch((function(t){console.log(t)}))},minusQty:function(t){this.cart[t].qty-=1,this.updateCart(this.cart[t])},addQty:function(t){this.cart[t].qty+=1,this.updateCart(this.cart[t])},updateCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/cart/").concat(t.id),n={product_id:t.product.id,qty:t.qty};this.$http.put(c,{data:n}).then((function(t){t.data.success?(e.getCart(),e.isLoading=!1):alert(t.data.message)})).catch((function(t){console.log(t)}))},goPay:function(){0!==this.cart.length?this.$router.push("/checkout"):this.$swal({icon:"warning",title:"購物車是空的呦",confirmButtonColor:"#3085d6"})},useCoupon:function(t){var e=this;this.couponCode=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/coupon");this.$http.post(c,{data:{code:t}}).then((function(t){t.data.success?(e.getCart(),e.$swal(t.data.message,"","success")):e.$swal({title:t.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})).catch((function(t){console.log(t)}))},delCartItem:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/cart/").concat(t);this.$swal({icon:"warning",title:"確定要刪除嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(t){t.isConfirmed&&(e.isLoading=!0,e.$http.delete(c).then((function(t){t.data.success?(e.isLoading=!1,e.getCart(),q["a"].emit("update-cart"),e.$swal(t.data.message,"","success")):e.$swal({title:t.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})))}))},delCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/carts");this.$swal({icon:"warning",title:"確定要刪除嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(c){c.isConfirmed&&(t.isLoading=!0,t.$http.delete(e).then((function(e){e.data.success?(t.isLoading=!1,t.$swal(e.data.message,"","success"),t.getCart(),q["a"].emit("update-cart")):(t.isLoading=!1,t.$swal({title:e.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"}))})))}))}},mounted:function(){this.getCart()}};A.render=T;e["default"]=A},e689:function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},a=n();e["a"]=a}}]);
//# sourceMappingURL=chunk-30b9ba30.17f51a5e.js.map