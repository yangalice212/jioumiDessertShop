(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fe8f00b"],{"1fae":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"container-fluid container-lg"},n={class:"d-flex justify-content-end my-4"},i=Object(o["g"])("span",{class:"material-icons"}," add ",-1),r=Object(o["f"])("Add Products "),s=Object(o["g"])("span",{class:"material-icons"}," delete ",-1),l=Object(o["f"])("Delete All "),d={class:"table-responsive"},u={class:"table text-warning",style:{"min-width":"700px"}},b=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",{width:"20%"},"Category"),Object(o["g"])("th",{width:"20%"},"Name"),Object(o["g"])("th",{width:"15%"},"Origin Price"),Object(o["g"])("th",{width:"15%"},"Price"),Object(o["g"])("th",{width:"15%"},"Enabled"),Object(o["g"])("th",{width:"15%",class:"text-center"},"Edit")])],-1),p={class:"fw-bold"},g={class:"fw-bold"},m={key:0,class:"form-check form-switch"},h={key:1,class:"form-check form-switch"},f={class:"text-center"},j=Object(o["g"])("span",{class:"material-icons"}," edit ",-1),O=Object(o["g"])("span",{class:"material-icons"}," delete ",-1),v={class:"d-flex justify-content-end"};function w(t,e,c,w,P,y){var k=Object(o["x"])("Loading"),x=Object(o["x"])("Pagination"),U=Object(o["x"])("ProductModal");return Object(o["s"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(k,{isLoading:P.isLoading},null,8,["isLoading"]),Object(o["g"])("div",a,[Object(o["g"])("div",n,[Object(o["g"])("button",{type:"button",class:"btn btn-outline-warning me-2 d-flex align-items-center",onClick:e[1]||(e[1]=Object(o["J"])((function(t){return y.openModal({},"new")}),["prevent"]))},[i,r]),Object(o["g"])("button",{type:"button",class:"btn btn-outline-danger d-flex align-items-center",onClick:e[2]||(e[2]=Object(o["J"])((function(){return y.delProducts&&y.delProducts.apply(y,arguments)}),["prevent"]))},[s,l])]),Object(o["g"])("div",d,[Object(o["g"])("table",u,[b,Object(o["g"])("tbody",null,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(P.products,(function(t){return Object(o["s"])(),Object(o["d"])("tr",{key:t.id},[Object(o["g"])("td",null,Object(o["A"])(t.category),1),Object(o["g"])("td",null,Object(o["A"])(t.title),1),Object(o["g"])("td",p,"NT$ "+Object(o["A"])(t.origin_price),1),Object(o["g"])("td",g,"NT$ "+Object(o["A"])(t.price),1),Object(o["g"])("td",null,[t.is_enabled?(Object(o["s"])(),Object(o["d"])("span",m,[Object(o["g"])("input",{class:"form-check-input",type:"checkbox",checked:"",onClick:function(e){return y.updateEnabled(t)},id:t.id},null,8,["onClick","id"]),Object(o["g"])("label",{class:"form-check-label",for:t.id},"啟用",8,["for"])])):(Object(o["s"])(),Object(o["d"])("span",h,[Object(o["g"])("input",{class:"form-check-input",type:"checkbox",onClick:function(e){return y.updateEnabled(t)},id:t.id},null,8,["onClick","id"]),Object(o["g"])("label",{class:"form-check-label text-gray",for:t.id},"未啟用",8,["for"])]))]),Object(o["g"])("td",f,[Object(o["g"])("a",{href:"#",class:"me-1",onClick:Object(o["J"])((function(e){return y.openModal(t,"edit")}),["prevent"])},[j],8,["onClick"]),Object(o["g"])("a",{href:"#",onClick:Object(o["J"])((function(e){return y.delProduct(t.id)}),["prevent"])},[O],8,["onClick"])])])})),128))])])]),Object(o["g"])("div",v,[Object(o["g"])(x,{page:P.pagination,onGetData:y.getProducts},null,8,["page","onGetData"])])]),Object(o["g"])(U,{product:P.tempProduct,"is-new":P.isNew,onUpdateProduct:y.updateProduct,ref:"productModal"},null,8,["product","is-new","onUpdateProduct"])],64)}var P=c("5530"),y=(c("99af"),c("a4d3"),c("e01a"),{id:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref:"modal"}),k={class:"modal-dialog modal-dialog-centered modal-xl"},x={class:"modal-content border-0"},U={class:"modal-header border-0"},C={id:"productModalLabel",class:"modal-title"},$={key:0},L={key:1},B=Object(o["g"])("button",{type:"button",class:"btn-close bg-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),I={class:"modal-body text-start text-dark"},M={class:"row"},D={class:"col-sm-4"},N={class:"mb-1"},E={class:"form-group"},_=Object(o["g"])("label",{for:"imageUrl"},"上傳圖片",-1),T={class:"input-group mb-1"},V={key:0},A={class:"form-group"},S={key:0},J={key:1},G={class:"col-sm-8"},F={class:"form-group mb-2"},q=Object(o["g"])("label",{for:"title"},"標題",-1),z={class:"row mb-2"},H={class:"form-group col-md-6"},K=Object(o["g"])("label",{for:"category"},"分類",-1),Q={class:"form-group col-md-6"},R=Object(o["g"])("label",{for:"unit"},"單位",-1),W={class:"row mb-2"},X={class:"form-group col-md-6"},Y=Object(o["g"])("label",{for:"origin_price"},"原價",-1),Z={class:"form-group col-md-6"},tt=Object(o["g"])("label",{for:"price"},"售價",-1),et={class:"form-group mb-2"},ct=Object(o["g"])("label",{for:"description"},"產品描述",-1),ot={class:"form-group mb-2"},at=Object(o["g"])("label",{for:"content"},"說明內容",-1),nt={class:"form-group"},it={class:"form-check"},rt=Object(o["g"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),st={class:"modal-footer border-0"},lt=Object(o["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function dt(t,e,c,a,n,i){return Object(o["s"])(),Object(o["d"])("div",y,[Object(o["g"])("div",k,[Object(o["g"])("div",x,[Object(o["g"])("div",U,[Object(o["g"])("h5",C,[c.isNew?(Object(o["s"])(),Object(o["d"])("span",$,"新增產品")):(Object(o["s"])(),Object(o["d"])("span",L,"編輯產品"))]),B]),Object(o["g"])("div",I,[Object(o["g"])("div",M,[Object(o["g"])("div",D,[Object(o["g"])("div",N,[Object(o["g"])("div",E,[_,Object(o["g"])("div",T,[Object(o["g"])("input",{onChange:e[1]||(e[1]=function(){return i.getImgData&&i.getImgData.apply(i,arguments)}),id:"imageUrl",type:"file",accept:".jpg, .png",class:"form-control",placeholder:"drag picture to here",ref:"imageUrl"},null,544),Object(o["g"])("button",{onClick:e[2]||(e[2]=function(){return i.uploadImg&&i.uploadImg.apply(i,arguments)}),disabled:!n.imgData,class:"btn btn-sm btn-outline-warning flex-shrink-0",type:"button"}," 上傳 ",8,["disabled"])])]),Object(o["g"])("img",{class:"img-fluid",src:n.tempProduct.imageUrl},null,8,["src"])]),Array.isArray(n.tempProduct.imagesUrl)?(Object(o["s"])(),Object(o["d"])("div",V,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(n.tempProduct.imagesUrl,(function(t,e){return Object(o["s"])(),Object(o["d"])("div",{key:e,class:"mb-1"},[Object(o["g"])("div",A,[Object(o["g"])("label",{for:e},"輸入圖片網址",8,["for"]),Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":function(t){return n.tempProduct.imagesUrl[e]=t},type:"text",class:"form-control",placeholder:"請輸入圖片連結",id:e},null,8,["onUpdate:modelValue","id"]),[[o["E"],n.tempProduct.imagesUrl[e]]])]),Object(o["g"])("img",{class:"img-fluid",src:t},null,8,["src"])])})),128)),!n.tempProduct.imagesUrl.length||n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]?(Object(o["s"])(),Object(o["d"])("div",S,[Object(o["g"])("button",{onClick:e[3]||(e[3]=function(t){return n.tempProduct.imagesUrl.push("")}),class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")])):(Object(o["s"])(),Object(o["d"])("div",J,[Object(o["g"])("button",{onClick:e[4]||(e[4]=function(t){return n.tempProduct.imagesUrl.pop()}),class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 ")]))])):Object(o["e"])("",!0)]),Object(o["g"])("div",G,[Object(o["g"])("div",F,[q,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.title=t}),id:"title",type:"text",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入標題"},null,512),[[o["E"],n.tempProduct.title,void 0,{trim:!0}]])]),Object(o["g"])("div",z,[Object(o["g"])("div",H,[K,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.category=t}),id:"category",type:"text",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入分類"},null,512),[[o["E"],n.tempProduct.category,void 0,{trim:!0}]])]),Object(o["g"])("div",Q,[R,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.unit=t}),id:"unit",type:"text",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入單位"},null,512),[[o["E"],n.tempProduct.unit,void 0,{trim:!0}]])])]),Object(o["g"])("div",W,[Object(o["g"])("div",X,[Y,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.origin_price=t}),id:"origin_price",type:"number",min:"0",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入原價"},null,512),[[o["E"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["g"])("div",Z,[tt,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.price=t}),id:"price",type:"number",min:"0",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入售價"},null,512),[[o["E"],n.tempProduct.price,void 0,{number:!0}]])])]),Object(o["g"])("div",et,[ct,Object(o["I"])(Object(o["g"])("textarea",{"onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.description=t}),id:"description",type:"text",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入產品描述"},"\n                ",512),[[o["E"],n.tempProduct.description,void 0,{trim:!0}]])]),Object(o["g"])("div",ot,[at,Object(o["I"])(Object(o["g"])("textarea",{"onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.content=t}),id:"content",type:"text",class:"form-control border-0 border-bottom border-primary",placeholder:"請輸入說明內容"},"\n                ",512),[[o["E"],n.tempProduct.content,void 0,{trim:!0}]])]),Object(o["g"])("div",nt,[Object(o["g"])("div",it,[Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[12]||(e[12]=function(t){return n.tempProduct.is_enabled=t}),id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[o["D"],n.tempProduct.is_enabled]]),rt])])])])]),Object(o["g"])("div",st,[lt,Object(o["g"])("button",{onClick:e[13]||(e[13]=function(e){return t.$emit("update-product",n.tempProduct)}),type:"button",class:"btn btn-primary text-white"}," 確認 ")])])])],512)}var ut=c("9641"),bt={props:["product","isNew"],data:function(){return{imgData:null,tempProduct:Object(P["a"])({},this.product)}},mixins:[ut["a"]],methods:{getImgData:function(t){var e=t.target.files[0],c=new FormData;c.append("file-to-upload",e),this.imgData=c},uploadImg:function(){var t=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/upload"),this.imgData).then((function(e){e.data.success?(t.imgData=null,t.$refs.imageUrl.value="",t.isNew?t.tempProduct.imageUrl=e.data.imageUrl:t.isNew||t.tempProduct.imagesUrl.push(e.data.imageUrl)):t.$swal({title:e.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})).catch((function(t){console.log(t)}))}},watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl="")}}};bt.render=dt;var pt=bt,gt=c("1799"),mt={name:"Products",data:function(){return{products:[],tempProduct:{imagesUrl:[]},pagination:{},isNew:!1,isLoading:!1}},components:{ProductModal:pt,Pagination:gt["a"]},mounted:function(){this.getProducts()},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1):t.$swal({title:e.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})).catch((function(t){console.log(t)}))},openModal:function(t,e){var c=this.$refs.productModal;switch(this.isNew=window.event.target.dataset.action,this.$refs.productModal.imgData=null,e){case"new":this.isNew=!0,this.tempProduct={imagesUrl:[]},c.openModal();break;case"edit":this.isNew=!1,this.tempProduct=Object(P["a"])({},t),this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),c.openModal();break;default:break}},updateProduct:function(){var t=this;this.isLoading=!0;var e=this.$refs.productModal,c=this.isNew?"post":"put",o=this.isNew?"":"".concat(this.tempProduct.id),a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/product/").concat(o);this.$http[c](a,{data:this.tempProduct}).then((function(c){c.data.success?(t.$swal({title:c.data.message,icon:"success"}),t.getProducts(),e.hideModal(),t.isLoading=!1):(t.$swal({title:c.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"}),t.isLoading=!1)})).catch((function(t){console.log(t)}))},updateEnabled:function(t){var e=this;this.isLoading=!0,this.tempProduct=Object(P["a"])({},t),this.tempProduct.is_enabled?this.tempProduct.is_enabled=0:this.tempProduct.is_enabled=1;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/product/").concat(t.id);this.$http.put(c,{data:this.tempProduct}).then((function(t){t.data.success?(e.$swal({title:t.data.message,icon:"success"}),e.getProducts(),e.isLoading=!1):(e.$swal({title:t.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"}),e.isLoading=!1)})).catch((function(t){console.log(t)}))},delProduct:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/product/").concat(t);this.$swal({icon:"warning",title:"確定要刪除嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(t){t.isConfirmed&&(e.isLoading=!0,e.$http.delete(c).then((function(t){t.data.success?(e.isLoading=!1,e.$swal(t.data.message,"","success"),e.getProducts()):e.$swal({title:t.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})))}))},delProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/products/all");this.$swal({icon:"warning",title:"確定要全部刪除嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(c){c.isConfirmed&&(t.isLoading=!0,t.$http.delete(e).then((function(e){e.data.success?(t.isLoading=!1,t.$swal(e.data.message,"","success"),t.getProducts()):t.$swal({title:e.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})))}))}}};mt.render=w;e["default"]=mt},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),n=c("da84"),i=c("5135"),r=c("861d"),s=c("9bf2").f,l=c("e893"),d=n.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};l(b,d);var p=b.prototype=d.prototype;p.constructor=b;var g=p.toString,m="Symbol(test)"==String(d("test")),h=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=g.call(t);if(i(u,t))return"";var c=m?e.slice(7,-1):e.replace(h,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-1fe8f00b.911f3cd0.js.map